<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 420">
  <defs>
    <style>
      @keyframes pulse {
        0% { opacity: 0; transform: translateX(-20px); }
        50% { opacity: 1; }
        100% { opacity: 0; transform: translateX(20px); }
      }
      @keyframes pulse-v {
        0% { opacity: 0; transform: translateY(-10px); }
        50% { opacity: 1; }
        100% { opacity: 0; transform: translateY(10px); }
      }
      @keyframes glow {
        0%, 100% { filter: drop-shadow(0 0 3px #00bcf2); }
        50% { filter: drop-shadow(0 0 8px #00bcf2); }
      }
      .pulse-dot { animation: pulse 1.5s ease-in-out infinite; }
      .pulse-dot-delay1 { animation: pulse 1.5s ease-in-out 0.3s infinite; }
      .pulse-dot-v { animation: pulse-v 1.5s ease-in-out infinite; }
      .logo-glow { animation: glow 2s ease-in-out infinite; }
      .apim-glow { animation: glow 2s ease-in-out infinite; filter: drop-shadow(0 0 5px #9b4dca); }
      .title { font-family: 'Segoe UI', Arial, sans-serif; font-size: 20px; font-weight: 600; fill: #fff; }
      .title-large { font-family: 'Segoe UI', Arial, sans-serif; font-size: 24px; font-weight: 600; fill: #fff; }
      .label { font-family: 'Segoe UI', Arial, sans-serif; font-size: 17px; fill: #fff; }
      .sublabel { font-family: 'Segoe UI', Arial, sans-serif; font-size: 15px; fill: #aaa; }
      .box { rx: 8; ry: 8; }
      .connector { stroke: #555; stroke-width: 2; fill: none; }
    </style>
    <marker id="arrowhead" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#555"/>
    </marker>
    <!-- MCP Logo gradient -->
    <linearGradient id="mcpGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ff6b35"/>
      <stop offset="50%" style="stop-color:#f7931e"/>
      <stop offset="100%" style="stop-color:#ff6b35"/>
    </linearGradient>
    <!-- Azure gradient -->
    <linearGradient id="azureGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0078d4"/>
      <stop offset="100%" style="stop-color:#00bcf2"/>
    </linearGradient>
    <!-- Kubernetes gradient -->
    <linearGradient id="k8sGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#326ce5"/>
      <stop offset="100%" style="stop-color:#54a3ff"/>
    </linearGradient>
    <!-- APIM purple gradient -->
    <linearGradient id="apimGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#68217a"/>
      <stop offset="100%" style="stop-color:#9b4dca"/>
    </linearGradient>
    <!-- Cost Management green gradient -->
    <linearGradient id="costGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#107c10"/>
      <stop offset="100%" style="stop-color:#2ecc71"/>
    </linearGradient>
  </defs>

  <!-- Dark Background -->
  <rect width="1200" height="420" fill="#1a1a1a"/>

  <!-- ============ CALLERS BOX (Left) ============ -->
  <rect x="20" y="25" width="204" height="255" fill="#1a1a1a" stroke="#666" stroke-width="1" class="box"/>
  <text x="122" y="55" class="title" text-anchor="middle">Callers</text>

  <!-- M365 Copilot -->
  <g transform="translate(35, 75)">
    <rect x="0" y="0" width="28" height="28" fill="#6264A7" rx="3"/>
    <text x="14" y="13" font-family="Segoe UI" font-size="8" font-weight="bold" fill="#fff" text-anchor="middle">M365</text>
    <text x="14" y="24" font-family="Segoe UI" font-size="8" font-weight="bold" fill="#fff" text-anchor="middle">CP</text>
    <text x="42" y="20" class="sublabel">M365 Copilot</text>
  </g>

  <!-- Other APIs (MCP clients) -->
  <g transform="translate(35, 120)">
    <g class="logo-glow">
      <circle cx="14" cy="14" r="14" fill="url(#mcpGrad)"/>
    </g>
    <text x="42" y="20" class="sublabel">Other MCP APIs</text>
  </g>

  <!-- MCP Inspector -->
  <g transform="translate(35, 170)">
    <rect x="0" y="0" width="28" height="28" fill="#1a1a1a" stroke="url(#mcpGrad)" stroke-width="2" rx="3"/>
    <circle cx="6" cy="10" r="2" fill="#ff5f56"/>
    <circle cx="6" cy="14" r="2" fill="#ffbd2e"/>
    <circle cx="6" cy="18" r="2" fill="#27ca40"/>
    <path d="M 12 8 C 18 8 18 14 18 14 C 18 20 18 20 12 20" stroke="url(#mcpGrad)" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <line x1="16" y1="8" x2="16" y2="20" stroke="url(#mcpGrad)" stroke-width="1.5" stroke-linecap="round"/>
    <text x="42" y="20" class="sublabel">MCP Inspector</text>
  </g>

  <!-- VS Code -->
  <g transform="translate(35, 215)">
    <rect x="0" y="0" width="28" height="28" fill="#007acc" rx="3"/>
    <text x="14" y="19" font-family="Segoe UI" font-size="13" font-weight="bold" fill="#fff" text-anchor="middle">VS</text>
    <text x="42" y="20" class="sublabel">VS Code</text>
  </g>

  <!-- ============ Connection: Callers to Control Plane ============ -->
  <line x1="225" y1="150" x2="275" y2="150" class="connector"/>
  <circle cx="240" cy="150" r="4" fill="#00bcf2" class="pulse-dot"/>
  <circle cx="258" cy="150" r="4" fill="#00bcf2" class="pulse-dot-delay1"/>

  <!-- ============ AZURE AGENTS CONTROL PLANE (Main Container) ============ -->
  <rect x="275" y="25" width="900" height="375" fill="none" stroke="#0078d4" stroke-width="2" stroke-dasharray="8,4" class="box"/>
  <text x="725" y="48" class="title-large" text-anchor="middle">Azure Agents</text>

  <!-- ============ Azure API Management ============ -->
  <g transform="translate(295, 70)">
    <rect x="0" y="0" width="250" height="300" fill="#121212" stroke="#68217a" stroke-width="2" class="box"/>

    <!-- APIM Logo with glow -->
    <g transform="translate(12, 12)" class="apim-glow">
      <path d="M 22 0 L 40 9 L 40 27 L 22 36 L 4 27 L 4 9 Z" fill="url(#apimGrad)"/>
      <text x="22" y="22" font-family="Segoe UI" font-size="11" font-weight="bold" fill="#fff" text-anchor="middle">API</text>
    </g>
    <text x="62" y="35" class="title">Azure APIM</text>

    <!-- Policies box -->
    <rect x="15" y="65" width="220" height="65" fill="#68217a" stroke="#9b4dca" stroke-width="1" class="box"/>
    <g transform="translate(28, 80)" class="apim-glow">
      <circle cx="16" cy="16" r="14" fill="#9b4dca"/>
      <circle cx="16" cy="16" r="8" fill="none" stroke="#fff" stroke-width="2"/>
      <circle cx="16" cy="16" r="3" fill="#fff"/>
      <line x1="16" y1="2" x2="16" y2="7" stroke="#fff" stroke-width="2"/>
      <line x1="16" y1="25" x2="16" y2="30" stroke="#fff" stroke-width="2"/>
      <line x1="2" y1="16" x2="7" y2="16" stroke="#fff" stroke-width="2"/>
      <line x1="25" y1="16" x2="30" y2="16" stroke="#fff" stroke-width="2"/>
    </g>
    <text x="135" y="102" class="label" text-anchor="middle">Policies</text>

    <!-- Metrics box -->
    <rect x="15" y="150" width="100" height="65" fill="#68217a" stroke="#9b4dca" stroke-width="1" class="box"/>
    <g transform="translate(28, 165)">
      <rect x="0" y="0" width="28" height="28" fill="#9b4dca" rx="3"/>
      <rect x="4" y="18" width="5" height="8" fill="#fff"/>
      <rect x="11" y="11" width="5" height="15" fill="#fff"/>
      <rect x="18" y="5" width="5" height="21" fill="#fff"/>
    </g>
    <text x="70" y="186" class="label" text-anchor="middle">Metrics</text>

    <!-- Logs box -->
    <rect x="125" y="150" width="110" height="65" fill="#68217a" stroke="#9b4dca" stroke-width="1" class="box"/>
    <g transform="translate(138, 165)">
      <rect x="0" y="0" width="28" height="28" fill="#9b4dca" rx="3"/>
      <rect x="5" y="6" width="18" height="3" fill="#fff" rx="1"/>
      <rect x="5" y="12" width="13" height="3" fill="#fff" rx="1"/>
      <rect x="5" y="18" width="18" height="3" fill="#fff" rx="1"/>
    </g>
    <text x="186" y="186" class="label" text-anchor="middle">Logs</text>
  </g>

  <!-- ============ Connection: APIM to AKS ============ -->
  <line x1="545" y1="170" x2="585" y2="170" class="connector"/>
  <circle cx="555" cy="170" r="4" fill="#00bcf2" class="pulse-dot"/>
  <circle cx="570" cy="170" r="4" fill="#00bcf2" class="pulse-dot-delay1"/>

  <!-- ============ Azure Kubernetes Service ============ -->
  <g transform="translate(585, 70)">
    <rect x="0" y="0" width="360" height="130" fill="#121212" stroke="#326ce5" stroke-width="2" class="box"/>

    <!-- AKS Header -->
    <g transform="translate(12, 14)">
      <g class="logo-glow">
        <circle cx="20" cy="20" r="18" fill="url(#k8sGrad)"/>
        <circle cx="20" cy="20" r="6" fill="none" stroke="#fff" stroke-width="1.5"/>
        <line x1="20" y1="5" x2="20" y2="12" stroke="#fff" stroke-width="1.5"/>
        <line x1="20" y1="28" x2="20" y2="35" stroke="#fff" stroke-width="1.5"/>
        <line x1="5" y1="20" x2="12" y2="20" stroke="#fff" stroke-width="1.5"/>
        <line x1="28" y1="20" x2="35" y2="20" stroke="#fff" stroke-width="1.5"/>
        <line x1="9" y1="9" x2="14" y2="14" stroke="#fff" stroke-width="1.5"/>
        <line x1="26" y1="26" x2="31" y2="31" stroke="#fff" stroke-width="1.5"/>
        <line x1="31" y1="9" x2="26" y2="14" stroke="#fff" stroke-width="1.5"/>
        <line x1="9" y1="31" x2="14" y2="26" stroke="#fff" stroke-width="1.5"/>
      </g>
      <text x="50" y="28" class="title">Azure Kubernetes Service</text>
    </g>

    <!-- Agent Pods Row -->
    <g transform="translate(15, 70)">
      <rect x="0" y="0" width="105" height="45" fill="#1a1a1a" stroke="#666" stroke-width="1" class="box"/>
      <g class="logo-glow">
        <circle cx="24" cy="22" r="12" fill="url(#mcpGrad)"/>
      </g>
      <text x="48" y="28" class="sublabel">Pod</text>

      <rect x="120" y="0" width="105" height="45" fill="#1a1a1a" stroke="#666" stroke-width="1" class="box"/>
      <g class="logo-glow">
        <circle cx="144" cy="22" r="12" fill="url(#mcpGrad)"/>
      </g>
      <text x="168" y="28" class="sublabel">Pod</text>

      <rect x="240" y="0" width="105" height="45" fill="#1a1a1a" stroke="#666" stroke-width="1" class="box"/>
      <g class="logo-glow">
        <circle cx="264" cy="22" r="12" fill="url(#mcpGrad)"/>
      </g>
      <text x="288" y="28" class="sublabel">Pod</text>
    </g>
  </g>

  <!-- ============ Connection: AKS down to Azure Cost Management ============ -->
  <line x1="765" y1="200" x2="765" y2="235" stroke="#555" stroke-width="2"/>
  <circle cx="765" cy="218" r="4" fill="#00bcf2" class="pulse-dot-v"/>

  <!-- ============ Azure Cost Management ============ -->
  <g transform="translate(585, 235)">
    <rect x="0" y="0" width="360" height="135" fill="#121212" stroke="#107c10" stroke-width="2" class="box"/>

    <!-- Cost Management Header -->
    <g transform="translate(12, 14)">
      <g class="logo-glow">
        <circle cx="20" cy="20" r="18" fill="url(#costGrad)"/>
        <text x="20" y="16" font-family="Segoe UI" font-size="10" font-weight="bold" fill="#fff" text-anchor="middle">$</text>
        <path d="M 10 24 L 15 24 L 18 18 L 22 28 L 25 22 L 30 22" stroke="#fff" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      </g>
      <text x="50" y="28" class="title">Azure Cost Management</text>
    </g>

    <!-- Marketplace Metered Billing -->
    <g transform="translate(15, 60)">
      <rect x="0" y="0" width="160" height="55" fill="#1a1a1a" stroke="#27ae60" stroke-width="1" class="box"/>
      <g transform="translate(10, 10)">
        <rect x="0" y="0" width="28" height="28" fill="#107c10" rx="3"/>
        <text x="14" y="12" font-family="Segoe UI" font-size="8" font-weight="bold" fill="#fff" text-anchor="middle">MKT</text>
        <text x="14" y="23" font-family="Segoe UI" font-size="8" font-weight="bold" fill="#fff" text-anchor="middle">API</text>
      </g>
      <text x="48" y="22" font-family="Segoe UI" font-size="12" fill="#aaa">Marketplace</text>
      <text x="48" y="36" font-family="Segoe UI" font-size="12" fill="#aaa">Metered Billing</text>
    </g>

    <!-- Invoice -->
    <g transform="translate(190, 60)">
      <rect x="0" y="0" width="155" height="55" fill="#1a1a1a" stroke="#27ae60" stroke-width="1" class="box"/>
      <g transform="translate(10, 10)">
        <rect x="0" y="0" width="28" height="28" fill="#107c10" rx="3"/>
        <rect x="5" y="5" width="18" height="18" fill="none" stroke="#fff" stroke-width="1.5" rx="1"/>
        <line x1="9" y1="10" x2="19" y2="10" stroke="#fff" stroke-width="1.2"/>
        <line x1="9" y1="14" x2="17" y2="14" stroke="#fff" stroke-width="1.2"/>
        <line x1="9" y1="18" x2="19" y2="18" stroke="#fff" stroke-width="1.2"/>
      </g>
      <text x="48" y="28" font-family="Segoe UI" font-size="12" fill="#aaa">Azure Invoice</text>
    </g>
  </g>
</svg>
